{"version":3,"sources":["theme.js","shared/components/Page/Page.js","shared/services/csv.js","shared/services/counts.js","scenes/Trajectory/helpers/data-cleanup.js","scenes/Trajectory/components/AxisX/AxisX.js","scenes/Trajectory/components/AxisY/AxisY.js","scenes/Trajectory/Trajectory.js","index.js","components/Layout/Layout.js","scenes/Info/Info.js","scenes/Trajectory/helpers/processor.js","scenes/NotFound/NotFound.js"],"names":["themeDefault","createMuiTheme","typography","fontSize","h1","fontWeight","h2","h3","h4","h5","h6","overrides","MuiTypography","root","paddingLeft","spacing","borderLeft","palette","primary","main","fontStyle","MuiIcon","width","textAlign","pageTitle","document","title","Page","children","subtitle","props","useEffect","Paper","Box","p","Typography","variant","gutterBottom","parseCSV","input","split","map","line","trim","header","reduce","acc","value","index","match","parseFloat","Date","parseValue","sources","states","a","fetch","response","text","raw","data","processData","firstIndex","_","findIndex","date","getDay","lastIndex","Math","floor","length","lastCases","counts","flow","slice","filter","isNth","total","cases","growth","extrapolated","previous","last","point","correction","projectedGrowth","type","valueOf","LIMIT","concat","compact","rest","rate","n","i","AxisX","scale","height","margin","label","transform","bottom","ref","d3","ticks","x","space","y","textAnchor","stroke","strokeWidth","strokeLinejoin","fill","AxisY","left","top","animate","makeLine","master","end","getLength","fromDate","domain","range","fromLength","ease","clamp","attr","transition","duration","path","node","getTotalLength","ReactDOM","render","basename","process","ThemeProvider","theme","tabs","pathname","useLocation","tab","to","matchPath","Container","maxWidth","CssBaseline","AppBar","position","Tabs","aria-label","Tab","key","component","RouterLink","exact","paragraph","useState","setData","window","page_data","source","Error","fetchCounts","then","pick","groupBy","mapValues","set","values","items","get","sum","deaths","identity","cleanupData","useMemo","round","sqrt","right","getX","max","getY","xScale","yScale","curve","color","Object","keys","useProcessor","viewBox","entries","id","strokeLinecap","d","href","target","rel","Button","getElementById"],"mappings":"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","file":"static/js/main.89b5cf2e.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles'\n\nconst themeDefault = createMuiTheme()\n\nexport default createMuiTheme({\n  typography: {\n    fontSize: 16,\n\n    h1: {\n      fontSize: '3.25rem',\n      fontWeight: 300,\n    },\n    h2: {\n      fontSize: '2.75rem',\n      fontWeight: 300,\n    },\n    h3: {\n      fontSize: '2.25rem',\n      fontWeight: 400,\n    },\n    h4: {\n      fontSize: '2rem',\n      fontWeight: 400,\n    },\n    h5: {\n      fontSize: '1.5rem',\n      fontWeight: 400,\n    },\n    h6: {\n      fontSize: '1.25rem',\n      fontWeight: 500,\n    },\n  },\n  overrides: {\n    MuiTypography: {\n      root: {\n        'blockquote&': {\n          paddingLeft: themeDefault.spacing(3),\n          borderLeft: `${themeDefault.spacing(0.5)}px solid ${themeDefault.palette.primary.main}`,\n          fontStyle: 'italic',\n        },\n      },\n    },\n    MuiIcon: {\n      root: {\n        width: '1.25em',\n        textAlign: 'center',\n      },\n    },\n  },\n})\n","import PropTypes from 'prop-types'\nimport React, { useEffect } from 'react'\n\nimport Box from '@material-ui/core/Box'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\n\nconst pageTitle = document.title\n\nexport default function Page({ title, subtitle, children, ...props }) {\n  useEffect(() => {\n    document.title = `${title} | ${pageTitle}`\n  }, [ title ])\n\n  return (\n    <Paper>\n      <Box p={3} {...props}>\n        {title && (\n          <Typography variant=\"h1\" gutterBottom>{title}</Typography>\n        )}\n\n        {children}\n      </Box>\n    </Paper>\n  )\n}\n\nPage.propTypes = {\n  className: PropTypes.string,\n  title: PropTypes.string,\n  subtitle: PropTypes.string,\n  actions: PropTypes.node,\n  children: PropTypes.node.isRequired,\n}\n","export function parseCSV(input) {\n  const [ header, ...lines ] = input.split('\\n').map((line) => line.trim().split(','))\n\n  const data = lines.map(\n    (line) => line.reduce(\n      (acc, value, index) => {\n        acc[header[index]] = parseValue(value)\n        return acc\n      },\n      {},\n    ),\n  )\n\n  return data\n}\n\nexport function parseValue(input) {\n  if (input.match(/^[+-]?[0-9]+(\\.[0-9]+)?$/)) {\n    return parseFloat(input)\n  }\n\n  if (input.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)) {\n    return new Date(input)\n  }\n\n  return input\n}\n","import { parseCSV } from './csv'\n\nconst sources = {\n  states: async () => {\n    const response = await fetch('https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv')\n    const raw = await response.text()\n    const data = parseCSV(raw)\n\n    return data\n  },\n}\n\nexport function fetchCounts(source) {\n  if (!sources[source]) {\n    throw new Error(`Unknown source: ${source}`)\n  }\n\n  return sources[source]()\n}\n","import _ from 'lodash/fp'\n\nconst LIMIT = 7\n\nexport default function cleanupData(data, pick) {\n  return _.flow([\n    _.groupBy('state'),\n    _.mapValues(processData),\n    _.set('_', _.flow([\n      _.groupBy('date'),\n      _.values,\n      _.map((items) => ({\n        date: items[0].date,\n        cases: _.flow([\n          _.map(_.get('cases')),\n          _.sum,\n        ])(items),\n        deaths: _.flow([\n          _.map(_.get('deaths')),\n          _.sum,\n        ])(items),\n      })),\n      // _.filter((item) => item.cases > 20),\n      processData,\n    ])(data)),\n    pick ? _.pick(pick) : _.identity,\n  ])(data)\n}\n\nfunction processData(data) {\n  const firstIndex = LIMIT === 7 ? _.findIndex(({ date }) => date.getDay() === 0, data) : 0\n  const lastIndex = firstIndex + LIMIT * Math.floor((data.length - firstIndex) / LIMIT)\n\n  let lastCases = null\n\n  const counts = _.flow([\n    _.slice(firstIndex, lastIndex + 1),\n    _.filter(isNth(LIMIT)),\n    _.map(({ date, cases: total }) => {\n      if (lastCases === null) {\n        lastCases = total\n        return null\n      }\n\n      const growth = total - lastCases\n      lastCases = total\n\n      return {\n        date,\n        total,\n        growth,\n      }\n    }),\n  ])(data)\n\n  const extrapolated = lastIndex < data.length - 1 && (() => {\n    const previous = _.last(counts)\n    const point = _.last(data)\n\n    const correction = LIMIT / (data.length - lastIndex - 1)\n    const growth = point.cases - previous.total\n    const projectedGrowth = growth * correction\n\n    return [\n      {\n        date: point.date,\n        total: point.cases,\n        growth: previous.growth * (1 - 1 / correction) + growth,\n        type: 'intermediate',\n      },\n      {\n        date: new Date(previous.date.valueOf() + LIMIT * 24 * 60 * 60 * 1000),\n        total: previous.total + projectedGrowth,\n        growth: projectedGrowth,\n        type: 'extrapolated',\n      },\n    ]\n  })()\n\n  return _.flow([\n    _.concat(_, extrapolated),\n    _.compact,\n    _.map(({ total, growth, ...rest }) => ({\n      ...rest,\n      total,\n      growth,\n      rate: growth / total,\n    })),\n  ])(counts)\n}\n\nfunction isNth(n) {\n  let i = 0\n  return () => i++ % n === 0\n}\n","import PropTypes from 'prop-types'\nimport React from 'react'\nimport * as d3 from 'd3'\n\nexport default function AxisX({ scale, width, height, margin, label, ...props }) {\n  // g.selectAll(\".tick line\").clone()\n  //   .attr(\"y2\", -height)\n  //   .attr(\"stroke-opacity\", 0.1))\n\n  return (\n    <g\n      {...props}\n      transform={`translate(0,${height - margin.bottom})`}\n      ref={(ref) => d3.axisBottom(scale).ticks(null, '~s')(d3.select(ref))}\n    >\n      {label && (\n        <>\n          <text\n            x={width - margin.space}\n            y={-margin.space}\n            fontWeight=\"bold\"\n            textAnchor=\"end\"\n            stroke=\"white\"\n            strokeWidth={4}\n            strokeLinejoin=\"round\"\n          >\n            {label}\n          </text>\n          <text\n            x={width - margin.space}\n            y={-margin.space}\n            fontWeight=\"bold\"\n            textAnchor=\"end\"\n            fill=\"black\"\n          >\n            {label}\n          </text>\n        </>\n      )}\n    </g>\n  )\n}\n\nAxisX.propTypes = {\n  scale: PropTypes.func.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  margin: PropTypes.shape({\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    space: PropTypes.number.isRequired,\n  }).isRequired,\n  label: PropTypes.string,\n}\n","import PropTypes from 'prop-types'\nimport React from 'react'\nimport * as d3 from 'd3'\n\nexport default function AxisY({ scale, width, height, margin, label, ...props }) {\n  // g.selectAll(\".tick line\").clone()\n  //   .attr(\"y2\", -width)\n  //   .attr(\"stroke-opacity\", 0.1))\n\n  return (\n    <g\n      {...props}\n      transform={`translate(${margin.left},0)`}\n      ref={(ref) => d3.axisLeft(scale).ticks(null, '~s')(d3.select(ref))}\n    >\n      {label && (\n        <>\n          <text\n            x={-margin.left + margin.space}\n            y={margin.top - margin.space}\n            fontWeight=\"bold\"\n            textAnchor=\"start\"\n            stroke=\"white\"\n            strokeWidth={4}\n            strokeLinejoin=\"round\"\n          >\n            {label}\n          </text>\n          <text\n            x={-margin.left + margin.space}\n            y={margin.top - margin.space}\n            fontWeight=\"bold\"\n            textAnchor=\"start\"\n            fill=\"black\"\n          >\n            {label}\n          </text>\n        </>\n      )}\n    </g>\n  )\n}\n\nAxisY.propTypes = {\n  scale: PropTypes.func.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  margin: PropTypes.shape({\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    space: PropTypes.number.isRequired,\n  }).isRequired,\n  label: PropTypes.string,\n}\n","import React, { useEffect, useState } from 'react'\nimport { Typography } from '@material-ui/core'\nimport * as d3 from 'd3'\n\nimport { fetchCounts } from '../../shared/services/counts'\nimport Page from '../../shared/components/Page/Page'\n\nimport useProcessor from './helpers/processor'\nimport cleanupData from './helpers/data-cleanup'\nimport AxisX from './components/AxisX/AxisX'\nimport AxisY from './components/AxisY/AxisY'\n\nexport default function Trajectory() {\n  const [ data, setData ] = useState(null)\n  window.page_data = data\n\n  useEffect(() => {\n    fetchCounts('states').then(\n      (data) => setData(cleanupData(data, [ '_', 'Nevada' ])),\n    )\n  }, [])\n\n  const {\n    width,\n    height,\n    margin,\n    xScale,\n    yScale,\n    makeLine,\n    color,\n    master,\n  } = useProcessor(data)\n\n  if (!data) return null\n\n  // https://github.com/d3/d3/blob/master/API.md\n  // https://observablehq.com/@d3/connected-scatterplot\n  return (\n    <Page title=\"Growth Per Infection\">\n      <svg viewBox={[ 0, 0, width, height ]}>\n        <AxisX\n          scale={xScale}\n          width={width}\n          height={height}\n          margin={margin}\n          label=\"Current Infections\"\n        />\n        <AxisY\n          scale={yScale}\n          width={width}\n          height={height}\n          margin={margin}\n          label=\"New Infections\"\n        />\n        {Object.entries(data).map(([ id, data ]) => (\n          <path\n            key={id}\n            id={id}\n            fill=\"none\"\n            stroke={color(id)}\n            strokeWidth=\"2.5\"\n            strokeLinejoin=\"round\"\n            strokeLinecap=\"round\"\n            d={makeLine(data)}\n            ref={animate(makeLine, data, master)}\n          />\n        ))}\n      </svg>\n\n      <Typography component=\"blockquote\">Based on <a href=\"https://www.youtube.com/watch?v=54XLXg4fYsc\" target=\"_blank\" rel=\"noopener noreferrer\">the methods of Grant Sanderson and Aatish Bhatia</a>.</Typography>\n    </Page>\n  )\n}\n\nfunction animate(makeLine, data, master) {\n  const end = getLength(makeLine(data))\n\n  const fromDate = d3.scaleLinear()\n    .domain(d3.extent(master, (point) => point.date))\n    .range([ 0, 1 ])\n  const fromLength = d3.scaleLinear()\n    .domain([ 0, end ])\n    .range([ 0, 1 ])\n\n  const ease = d3.scaleLinear()\n    .domain(data.map((point) => fromDate(point.date)))\n    .range(data.map((point, index) => fromLength(getLength(makeLine(data.slice(0, index + 1))))))\n    .clamp(true)\n\n  return (ref) => {\n    if (ref) {\n      d3.select(ref)\n        .attr('stroke-dasharray', `0,${end}`)\n        .transition()\n        .duration(5000)\n        .ease(ease)\n        .attr('stroke-dasharray', `${end},${end}`)\n    }\n  }\n}\n\nfunction getLength(path) {\n  return d3.create('svg:path').attr('d', path).node().getTotalLength()\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\nimport { ThemeProvider } from '@material-ui/core/styles'\n\nimport theme from './theme'\nimport Layout from './components/Layout/Layout'\n\nimport Info from './scenes/Info/Info'\nimport NotFound from './scenes/NotFound/NotFound'\nimport Trajectory from './scenes/Trajectory/Trajectory'\n\nReactDOM.render((\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <ThemeProvider theme={theme}>\n      <Layout\n        title=\"Coronavirus Explorations\"\n        tabs={[\n          { label: 'Info', to: '/', exact: true },\n          { label: 'Trajectory', to: '/trajectory' },\n          // { label: 'Growth Factor', to: '/growth-factor' }, // https://youtu.be/Kas0tIxDvrg?t=333\n        ]}\n      >\n        <Switch>\n          <Route path=\"/\" exact>\n            <Info />\n          </Route>\n          <Route path=\"/trajectory\">\n            <Trajectory />\n          </Route>\n\n          <Route>\n            <NotFound />\n          </Route>\n        </Switch>\n      </Layout>\n    </ThemeProvider>\n  </BrowserRouter>\n), document.getElementById('root'))\n","import PropTypes from 'prop-types'\nimport React from 'react'\nimport { Link as RouterLink, useLocation, matchPath } from 'react-router-dom'\nimport {\n  CssBaseline,\n  AppBar,\n  Container,\n  Tabs,\n  Tab,\n  Typography,\n} from '@material-ui/core'\n\nexport default function Layout({ title, tabs, children, ...props }) {\n  const { pathname } = useLocation()\n  const tab = tabs.findIndex(({ to: path, ...props }) => matchPath(pathname, { path, ...props }))\n\n  return (\n    <Container maxWidth=\"md\" {...props}>\n      <CssBaseline />\n      <Typography variant=\"h1\" gutterBottom>{title}</Typography>\n\n      <AppBar position=\"static\">\n        <Tabs aria-label=\"navigation\" value={tab < 0 ? false : tab}>\n          {tabs.map(({ label, to }) => (\n            <Tab\n              key={to}\n              component={RouterLink}\n              to={to}\n              label={label}\n            />\n          ))}\n        </Tabs>\n      </AppBar>\n\n      {children}\n    </Container>\n  )\n}\n\nLayout.propTypes = {\n  title: PropTypes.string.isRequired,\n  tabs: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string.isRequired,\n    to: PropTypes.string.isRequire,\n    exact: PropTypes.bool,\n  })).isRequired,\n  children: PropTypes.node.isRequired,\n}\n","/* eslint-disable max-len */\nimport React from 'react'\nimport { Typography } from '@material-ui/core'\n\nimport Page from '../../shared/components/Page/Page'\n\nexport default function Info() {\n  return (\n    <Page title=\"Project Information\">\n      <Typography paragraph>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</Typography>\n      <Typography component=\"blockquote\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo.</Typography>\n    </Page>\n  )\n}\n","import { useMemo } from 'react'\nimport * as d3 from 'd3'\n\nexport default function useProcessor(data) {\n  return useMemo(() => {\n    if (!data) return {}\n\n    const master = data._\n\n    const width = 864\n    const height = Math.round(width * ((Math.sqrt(5) - 1) / 2))\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40,\n      space: 4,\n    }\n\n    const getX = (point) => Math.max(point.total, 1)\n    const getY = (point) => Math.max(point.growth, 1)\n\n    const xScale = d3.scaleLog()\n      .domain([ 1, d3.max(master, getX) ])\n      .range([ margin.left, width - margin.right ])\n\n    const yScale = d3.scaleLog()\n      .domain([ 1, d3.max(master, getY) ])\n      .range([ height - margin.bottom, margin.top ])\n\n    const makeLine = d3.line()\n      .curve(d3.curveCatmullRom)\n      .x((point) => xScale(getX(point)))\n      .y((point) => yScale(getY(point)))\n\n    const color = d3.scaleOrdinal()\n      .domain(Object.keys(data))\n      .range(d3.schemeCategory10)\n\n    return {\n      width,\n      height,\n      margin,\n      xScale,\n      yScale,\n      makeLine,\n      color,\n      master,\n    }\n  }, [ data ])\n}\n","import React from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\nimport { Button, Typography } from '@material-ui/core'\n\nimport Page from '../../shared/components/Page/Page'\n\nexport default function NotFound() {\n  return (\n    <Page title=\"Oops! Page Not Found\">\n      <Typography paragraph>\n        Something went wrong. The page you are looking for could not be found.\n      </Typography>\n      <Typography paragraph>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          component={RouterLink}\n          to=\"/\"\n        >\n          Go Home\n        </Button>\n      </Typography>\n    </Page>\n  )\n}\n"],"sourceRoot":""}